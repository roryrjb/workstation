- name: gpg keys url
  become: true
  become_method: sudo
  apt_key:
    url: "{{ item }}"
    state: present
  loop:
    - "https://download.spotify.com/debian/pubkey_0D811D58.gpg"
    - "https://updates.signal.org/desktop/apt/keys.asc"
    - "https://packages.microsoft.com/keys/microsoft.asc"
    - "https://download.sublimetext.com/sublimehq-pub.gpg"
    - "https://dl.google.com/linux/linux_signing_key.pub"

- name: add repos
  become: true
  become_method: sudo
  apt_repository:
    state: present
    repo: "{{ item }}"
    codename: "{{ release }}"
  loop:
    - "ppa:dysfunctionalprogramming/pamixer"
    - "ppa:neovim-ppa/unstable"
    - "deb http://repository.spotify.com stable non-free"
    - "deb [arch=amd64] https://updates.signal.org/desktop/apt xenial main"
    - "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main"
    - "deb [arch=amd64 signed-by=/usr/share/keyrings/1password-archive-keyring.gpg] https://downloads.1password.com/linux/debian/amd64 stable main"
    - "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main"
    - "deb https://download.sublimetext.com/ apt/stable/"

- name: packages
  become: true
  become_method: sudo
  apt:
    install_recommends: no
    name:
      - pamixer
      - ufw
      - hplip
      - ffmpeg
      - libreoffice
      - gimp
      - inkscape
      - xclip
      - youtube-dl
      - peek
      - audacity
      - spotify-client
      - signal-desktop
      - code
      - 1password
      - ubuntu-restricted-addons
      - gstreamer1.0-plugins-bad
      - gstreamer1.0-plugins-ugly
      - qt5-style-plugins
      - vlc
      - sublime-merge
      - sublime-text
      - transmission-gtk
      - gnome-tweaks
      - google-chrome-stable
      - google-chrome-beta
      - google-chrome-unstable
      - neovim
      - xfce4-terminal
    state: present

- name: ufw deny all
  become: true
  become_method: sudo
  ufw:
    state: enabled
    policy: deny
    direction: incoming
